// Code generated by transpiler. DO NOT EDIT.

/**
 * Go Video Downloader
 *
 *    Copyright 2019 Tenta, LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * For any questions, please contact developer@tenta.io
 *
 * senateisvp/module.go: transpiled from https://github.com/ytdl-org/youtube-dl/blob/master/youtube_dl/extractor/senateisvp.py
 */

package senateisvp

import (
	Ωre "github.com/tenta-browser/go-video-downloader/gen/re"
	Ωparse "github.com/tenta-browser/go-video-downloader/gen/urllib/parse"
	Ωcompat "github.com/tenta-browser/go-video-downloader/gen/youtube_dl/compat"
	Ωcommon "github.com/tenta-browser/go-video-downloader/gen/youtube_dl/extractor/common"
	Ωutils "github.com/tenta-browser/go-video-downloader/gen/youtube_dl/utils"
	λ "github.com/tenta-browser/go-video-downloader/runtime"
)

var (
	ExtractorError   λ.Object
	InfoExtractor    λ.Object
	SenateISVPIE     λ.Object
	ϒcompat_parse_qs λ.Object
	ϒunsmuggle_url   λ.Object
)

func init() {
	λ.InitModule(func() {
		InfoExtractor = Ωcommon.InfoExtractor
		ExtractorError = Ωutils.ExtractorError
		ϒunsmuggle_url = Ωutils.ϒunsmuggle_url
		ϒcompat_parse_qs = Ωcompat.ϒcompat_parse_qs
		SenateISVPIE = λ.Cal(λ.TypeType, λ.StrLiteral("SenateISVPIE"), λ.NewTuple(InfoExtractor), func() λ.Dict {
			var (
				SenateISVPIE__COMM_MAP          λ.Object
				SenateISVPIE__VALID_URL         λ.Object
				SenateISVPIE__get_info_for_comm λ.Object
				SenateISVPIE__real_extract      λ.Object
			)
			SenateISVPIE__COMM_MAP = λ.NewList(
				λ.NewList(
					λ.StrLiteral("ag"),
					λ.StrLiteral("76440"),
					λ.StrLiteral("http://ag-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("aging"),
					λ.StrLiteral("76442"),
					λ.StrLiteral("http://aging-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("approps"),
					λ.StrLiteral("76441"),
					λ.StrLiteral("http://approps-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("armed"),
					λ.StrLiteral("76445"),
					λ.StrLiteral("http://armed-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("banking"),
					λ.StrLiteral("76446"),
					λ.StrLiteral("http://banking-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("budget"),
					λ.StrLiteral("76447"),
					λ.StrLiteral("http://budget-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("cecc"),
					λ.StrLiteral("76486"),
					λ.StrLiteral("http://srs-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("commerce"),
					λ.StrLiteral("80177"),
					λ.StrLiteral("http://commerce1-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("csce"),
					λ.StrLiteral("75229"),
					λ.StrLiteral("http://srs-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("dpc"),
					λ.StrLiteral("76590"),
					λ.StrLiteral("http://dpc-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("energy"),
					λ.StrLiteral("76448"),
					λ.StrLiteral("http://energy-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("epw"),
					λ.StrLiteral("76478"),
					λ.StrLiteral("http://epw-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("ethics"),
					λ.StrLiteral("76449"),
					λ.StrLiteral("http://ethics-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("finance"),
					λ.StrLiteral("76450"),
					λ.StrLiteral("http://finance-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("foreign"),
					λ.StrLiteral("76451"),
					λ.StrLiteral("http://foreign-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("govtaff"),
					λ.StrLiteral("76453"),
					λ.StrLiteral("http://govtaff-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("help"),
					λ.StrLiteral("76452"),
					λ.StrLiteral("http://help-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("indian"),
					λ.StrLiteral("76455"),
					λ.StrLiteral("http://indian-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("intel"),
					λ.StrLiteral("76456"),
					λ.StrLiteral("http://intel-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("intlnarc"),
					λ.StrLiteral("76457"),
					λ.StrLiteral("http://intlnarc-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("jccic"),
					λ.StrLiteral("85180"),
					λ.StrLiteral("http://jccic-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("jec"),
					λ.StrLiteral("76458"),
					λ.StrLiteral("http://jec-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("judiciary"),
					λ.StrLiteral("76459"),
					λ.StrLiteral("http://judiciary-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("rpc"),
					λ.StrLiteral("76591"),
					λ.StrLiteral("http://rpc-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("rules"),
					λ.StrLiteral("76460"),
					λ.StrLiteral("http://rules-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("saa"),
					λ.StrLiteral("76489"),
					λ.StrLiteral("http://srs-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("smbiz"),
					λ.StrLiteral("76461"),
					λ.StrLiteral("http://smbiz-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("srs"),
					λ.StrLiteral("75229"),
					λ.StrLiteral("http://srs-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("uscc"),
					λ.StrLiteral("76487"),
					λ.StrLiteral("http://srs-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("vetaff"),
					λ.StrLiteral("76462"),
					λ.StrLiteral("http://vetaff-f.akamaihd.net"),
				),
				λ.NewList(
					λ.StrLiteral("arch"),
					λ.StrLiteral(""),
					λ.StrLiteral("http://ussenate-f.akamaihd.net/"),
				),
			)
			SenateISVPIE__VALID_URL = λ.StrLiteral("https?://(?:www\\.)?senate\\.gov/isvp/?\\?(?P<qs>.+)")
			SenateISVPIE__get_info_for_comm = λ.NewFunction("_get_info_for_comm",
				[]λ.Param{
					{Name: "self"},
					{Name: "committee"},
				},
				0, false, false,
				func(λargs []λ.Object) λ.Object {
					var (
						ϒcommittee = λargs[1]
						ϒentry     λ.Object
						ϒself      = λargs[0]
						τmp0       λ.Object
						τmp1       λ.Object
					)
					τmp0 = λ.Cal(λ.BuiltinIter, λ.GetAttr(ϒself, "_COMM_MAP", nil))
					for {
						if τmp1 = λ.NextDefault(τmp0, λ.AfterLast); τmp1 == λ.AfterLast {
							break
						}
						ϒentry = τmp1
						if λ.IsTrue(λ.Eq(λ.GetItem(ϒentry, λ.IntLiteral(0)), ϒcommittee)) {
							return λ.GetItem(ϒentry, λ.NewSlice(λ.IntLiteral(1), λ.None, λ.None))
						}
					}
					return λ.None
				})
			SenateISVPIE__real_extract = λ.NewFunction("_real_extract",
				[]λ.Param{
					{Name: "self"},
					{Name: "url"},
				},
				0, false, false,
				func(λargs []λ.Object) λ.Object {
					var (
						ϒcommittee     λ.Object
						ϒdomain        λ.Object
						ϒentry         λ.Object
						ϒf4m_url       λ.Object
						ϒfilename      λ.Object
						ϒformats       λ.Object
						ϒhdcore_sign   λ.Object
						ϒm3u8_url      λ.Object
						ϒmobj          λ.Object
						ϒposter        λ.Object
						ϒqs            λ.Object
						ϒself          = λargs[0]
						ϒsmuggled_data λ.Object
						ϒstream_num    λ.Object
						ϒthumbnail     λ.Object
						ϒtitle         λ.Object
						ϒurl           = λargs[1]
						ϒurl_params    λ.Object
						ϒvideo_id      λ.Object
						ϒvideo_type    λ.Object
						ϒwebpage       λ.Object
						τmp0           λ.Object
						τmp1           λ.Object
						τmp2           λ.Object
					)
					τmp0 = λ.Cal(ϒunsmuggle_url, ϒurl, λ.DictLiteral(map[λ.Object]λ.Object{}))
					ϒurl = λ.GetItem(τmp0, λ.IntLiteral(0))
					ϒsmuggled_data = λ.GetItem(τmp0, λ.IntLiteral(1))
					ϒqs = λ.Cal(ϒcompat_parse_qs, λ.Calm(λ.Cal(Ωre.ϒmatch, λ.GetAttr(ϒself, "_VALID_URL", nil), ϒurl), "group", λ.StrLiteral("qs")))
					if λ.IsTrue(func() λ.Object {
						if λv := λ.NewBool(!λ.IsTrue(λ.Calm(ϒqs, "get", λ.StrLiteral("filename")))); λ.IsTrue(λv) {
							return λv
						} else if λv := λ.NewBool(!λ.IsTrue(λ.Calm(ϒqs, "get", λ.StrLiteral("type")))); λ.IsTrue(λv) {
							return λv
						} else {
							return λ.NewBool(!λ.IsTrue(λ.Calm(ϒqs, "get", λ.StrLiteral("comm"))))
						}
					}()) {
						panic(λ.Raise(λ.Call(ExtractorError, λ.NewArgs(λ.StrLiteral("Invalid URL")), λ.KWArgs{
							{Name: "expected", Value: λ.True},
						})))
					}
					ϒvideo_id = λ.Cal(Ωre.ϒsub, λ.StrLiteral(".mp4$"), λ.StrLiteral(""), λ.GetItem(λ.GetItem(ϒqs, λ.StrLiteral("filename")), λ.IntLiteral(0)))
					ϒwebpage = λ.Calm(ϒself, "_download_webpage", ϒurl, ϒvideo_id)
					if λ.IsTrue(λ.Calm(ϒsmuggled_data, "get", λ.StrLiteral("force_title"))) {
						ϒtitle = λ.GetItem(ϒsmuggled_data, λ.StrLiteral("force_title"))
					} else {
						ϒtitle = λ.Calm(ϒself, "_html_search_regex", λ.StrLiteral("<title>([^<]+)</title>"), ϒwebpage, ϒvideo_id)
					}
					ϒposter = λ.Calm(ϒqs, "get", λ.StrLiteral("poster"))
					ϒthumbnail = func() λ.Object {
						if λ.IsTrue(ϒposter) {
							return λ.GetItem(ϒposter, λ.IntLiteral(0))
						} else {
							return λ.None
						}
					}()
					ϒvideo_type = λ.GetItem(λ.GetItem(ϒqs, λ.StrLiteral("type")), λ.IntLiteral(0))
					ϒcommittee = func() λ.Object {
						if λ.IsTrue(λ.Eq(ϒvideo_type, λ.StrLiteral("arch"))) {
							return ϒvideo_type
						} else {
							return λ.GetItem(λ.GetItem(ϒqs, λ.StrLiteral("comm")), λ.IntLiteral(0))
						}
					}()
					τmp0 = λ.Calm(ϒself, "_get_info_for_comm", ϒcommittee)
					ϒstream_num = λ.GetItem(τmp0, λ.IntLiteral(0))
					ϒdomain = λ.GetItem(τmp0, λ.IntLiteral(1))
					ϒformats = λ.NewList()
					if λ.IsTrue(λ.Eq(ϒvideo_type, λ.StrLiteral("arch"))) {
						ϒfilename = func() λ.Object {
							if λ.Contains(ϒvideo_id, λ.StrLiteral(".")) {
								return ϒvideo_id
							} else {
								return λ.Add(ϒvideo_id, λ.StrLiteral(".mp4"))
							}
						}()
						ϒformats = λ.NewList(λ.DictLiteral(map[string]λ.Object{
							"url": λ.Add(λ.Cal(Ωparse.ϒurljoin, ϒdomain, ϒfilename), λ.StrLiteral("?v=3.1.0&fp=&r=&g=")),
						}))
					} else {
						ϒhdcore_sign = λ.StrLiteral("hdcore=3.1.0")
						ϒurl_params = λ.NewTuple(
							ϒdomain,
							ϒvideo_id,
							ϒstream_num,
						)
						ϒf4m_url = λ.Add(λ.Mod(λ.StrLiteral("%s/z/%s_1@%s/manifest.f4m?"), ϒurl_params), ϒhdcore_sign)
						ϒm3u8_url = λ.Mod(λ.StrLiteral("%s/i/%s_1@%s/master.m3u8"), ϒurl_params)
						τmp0 = λ.Cal(λ.BuiltinIter, λ.Call(λ.GetAttr(ϒself, "_extract_f4m_formats", nil), λ.NewArgs(
							ϒf4m_url,
							ϒvideo_id,
						), λ.KWArgs{
							{Name: "f4m_id", Value: λ.StrLiteral("f4m")},
						}))
						for {
							if τmp1 = λ.NextDefault(τmp0, λ.AfterLast); τmp1 == λ.AfterLast {
								break
							}
							ϒentry = τmp1
							λ.Calm(ϒentry, "update", λ.DictLiteral(map[string]λ.Object{
								"extra_param_to_segment_url": ϒhdcore_sign,
							}))
							λ.Calm(ϒformats, "append", ϒentry)
						}
						τmp0 = λ.Cal(λ.BuiltinIter, λ.Call(λ.GetAttr(ϒself, "_extract_m3u8_formats", nil), λ.NewArgs(
							ϒm3u8_url,
							ϒvideo_id,
						), λ.KWArgs{
							{Name: "ext", Value: λ.StrLiteral("mp4")},
							{Name: "m3u8_id", Value: λ.StrLiteral("m3u8")},
						}))
						for {
							if τmp1 = λ.NextDefault(τmp0, λ.AfterLast); τmp1 == λ.AfterLast {
								break
							}
							ϒentry = τmp1
							ϒmobj = λ.Cal(Ωre.ϒsearch, λ.StrLiteral("(?P<tag>(?:-p|-b)).m3u8"), λ.GetItem(ϒentry, λ.StrLiteral("url")))
							if λ.IsTrue(ϒmobj) {
								τmp2 = λ.IAdd(λ.GetItem(ϒentry, λ.StrLiteral("format_id")), λ.Calm(ϒmobj, "group", λ.StrLiteral("tag")))
								λ.SetItem(ϒentry, λ.StrLiteral("format_id"), τmp2)
							}
							λ.Calm(ϒformats, "append", ϒentry)
						}
						λ.Calm(ϒself, "_sort_formats", ϒformats)
					}
					return λ.DictLiteral(map[string]λ.Object{
						"id":        ϒvideo_id,
						"title":     ϒtitle,
						"formats":   ϒformats,
						"thumbnail": ϒthumbnail,
					})
				})
			return λ.ClassDictLiteral(map[string]λ.Object{
				"_COMM_MAP":          SenateISVPIE__COMM_MAP,
				"_VALID_URL":         SenateISVPIE__VALID_URL,
				"_get_info_for_comm": SenateISVPIE__get_info_for_comm,
				"_real_extract":      SenateISVPIE__real_extract,
			})
		}())
	})
}
